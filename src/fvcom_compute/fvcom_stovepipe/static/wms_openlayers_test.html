<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>FVCOM WMS Service Test</title>
	<script src="openlayers/OpenLayers.js" type="text/javascript"></script>
	<link rel="stylesheet" href="openlayers/theme/default/style.css" />
	<style type="text/css">
		html, body, #map {
			margin: 0;
			width: 100%;
			height: 100%;
		}
	</style>
	<script type="text/javascript">
		var map, layer;
			function init(){
               
				//map = new OpenLayers.Map('map');
				map = new OpenLayers.Map('map',{
                                                layers: [
                                                         new OpenLayers.Layer.XYZ(
                                                        'ESRI Ocean'
                                                        ,'http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer/tile/${z}/${y}/${x}.jpg'
                                                        ,{
                                                          sphericalMercator : true
                                                          ,visibility        : 1
                                                          ,isBaseLayer       : true
                                                          ,opacity           : 1
                                                          ,wrapDateLine      : true
                                                          ,attribution       : "GEBCO, NOAA, National Geographic, AND data by <a href='http://www.arcgis.com/home/item.html?id=6348e67824504fc9a62976434bf0d8d5'>ESRI</a>"
                                                          }
                                                                                   ),
                                                         new OpenLayers.Layer.OSM()
                                                        ]
                                            ,projection        : "EPSG:3857"
                                            ,displayProjection : "EPSG:4326"
                                            ,units             : "m"
                                            ,maxExtent         : new OpenLayers.Bounds(-20037508,-20037508,20037508,20037508.34)
                                       });

				fvcomv = new OpenLayers.Layer.WMS("FVCOM Velocity",
				                                "http://{{localsite}}/wms/30yr_gom3/",
				                                {
				                                    layers:"u,v",
				                                    transparent: true,
				                                    styles: "facets_average_jet_0_1.5_cell_False",
				                                    time: "1984-10-17T00:00:00",
				                                    elevation: "5"
				                                },
				                                
				                                {
				                                    singleTile: false, 
				                                    ratio: 1,
				                                    isBaseLayer: false,
				                                    visibility: false
				                                    ,getURL       : function (bounds) {
        
                                                    bounds = this.adjustBounds(bounds);
                                                    //alert(bounds)
                                                    bounds.transform(new OpenLayers.Projection("EPSG:3857"),new OpenLayers.Projection("EPSG:4326"));
                                                    //alert(bounds);
                                                    var imageSize = this.getImageSize();
                                                    var newParams = {};
                                                    // WMS 1.3 introduced axis order
                                                    var reverseAxisOrder = this.reverseAxisOrder();
                                                    newParams.BBOX = this.encodeBBOX ?
                                                        bounds.toBBOX(null, reverseAxisOrder) :
                                                        bounds.toArray(reverseAxisOrder);
                                                    newParams.WIDTH = imageSize.w;
                                                    newParams.HEIGHT = imageSize.h;
                                                    var requestString = this.getFullRequestString(newParams);
                                                    return requestString;
				                                }}
				                                );
				fvcomt = new OpenLayers.Layer.WMS("FVCOM Temperature",
				                                "http://{{localsite}}/wms/30yr_gom3/",
				                                {
				                                    layers:"temp",
				                                    transparent: true,
				                                    styles: "facets_average_jet_0_18_node_False",
				                                    time: "1984-10-17T00:00:00",
				                                    elevation: "1"
				                                },
				                                
				                                {
				                                    singleTile: false, 
				                                    ratio: 1,
				                                    isBaseLayer: false,
				                                    visibility: false
				                                    ,getURL       : function (bounds) {
        
                                                    bounds = this.adjustBounds(bounds);
                                                    //alert(bounds)
                                                    bounds.transform(new OpenLayers.Projection("EPSG:3857"),new OpenLayers.Projection("EPSG:4326"));
                                                    //alert(bounds);
                                                    var imageSize = this.getImageSize();
                                                    var newParams = {};
                                                    // WMS 1.3 introduced axis order
                                                    var reverseAxisOrder = this.reverseAxisOrder();
                                                    newParams.BBOX = this.encodeBBOX ?
                                                        bounds.toBBOX(null, reverseAxisOrder) :
                                                        bounds.toArray(reverseAxisOrder);
                                                    newParams.WIDTH = imageSize.w;
                                                    newParams.HEIGHT = imageSize.h;
                                                    var requestString = this.getFullRequestString(newParams);
                                                    return requestString;
				                                }
				                                }
				                                );
				fvcomvec = new OpenLayers.Layer.WMS("FVCOM Velocity Vectors",
				                                "http://{{localsite}}/wms/30yr_gom3/",
				                                {
				                                    layers:"u,v",
				                                    transparent: true,
				                                    styles: "vectors_average_jet_0_1.5_cell_False",
				                                    time: "1984-10-17T00:00:00",
				                                    elevation: "5"
				                                },
				                                
				                                {
				                                    singleTile: true, 
				                                    ratio: 1,
				                                    isBaseLayer: false,
				                                    visibility: true
				                                    ,getURL       : function (bounds) {
        
                                                    bounds = this.adjustBounds(bounds);
                                                    //alert(bounds)
                                                    bounds.transform(new OpenLayers.Projection("EPSG:3857"),new OpenLayers.Projection("EPSG:4326"));
                                                    //alert(bounds);
                                                    var imageSize = this.getImageSize();
                                                    var newParams = {};
                                                    // WMS 1.3 introduced axis order
                                                    var reverseAxisOrder = this.reverseAxisOrder();
                                                    newParams.BBOX = this.encodeBBOX ?
                                                        bounds.toBBOX(null, reverseAxisOrder) :
                                                        bounds.toArray(reverseAxisOrder);
                                                    newParams.WIDTH = imageSize.w;
                                                    newParams.HEIGHT = imageSize.h;
                                                    var requestString = this.getFullRequestString(newParams);
                                                    return requestString;
				                                }
				                                }
				                                );
				                                
		     fvcomcont = new OpenLayers.Layer.WMS("FVCOM Velocity Contours",
				                                "http://{{localsite}}/wms/30yr_gom3/",
				                                {
				                                    layers:"u,v",
				                                    transparent: true,
				                                    styles: "contours_average_jet_0_1.5_cell_False",
				                                    time: "1984-10-17T00:00:00",
				                                    elevation: "1"
				                                },
				                                
				                                {
				                                    singleTile: true, 
				                                    ratio: 1,
				                                    isBaseLayer: false,
				                                    visibility: false
				                                    ,getURL       : function (bounds) {
        
                                                    bounds = this.adjustBounds(bounds);
                                                    //alert(bounds)
                                                    bounds.transform(new OpenLayers.Projection("EPSG:3857"),new OpenLayers.Projection("EPSG:4326"));
                                                    //alert(bounds);
                                                    var imageSize = this.getImageSize();
                                                    var newParams = {};
                                                    // WMS 1.3 introduced axis order
                                                    var reverseAxisOrder = this.reverseAxisOrder();
                                                    newParams.BBOX = this.encodeBBOX ?
                                                        bounds.toBBOX(null, reverseAxisOrder) :
                                                        bounds.toArray(reverseAxisOrder);
                                                    newParams.WIDTH = imageSize.w;
                                                    newParams.HEIGHT = imageSize.h;
                                                    var requestString = this.getFullRequestString(newParams);
                                                    return requestString;
				                                }
				                                }
				                                );
				                                
		  fvcomfilled = new OpenLayers.Layer.WMS("FVCOM Velocity Filled Contours",
				                                "http://{{localsite}}/wms/30yr_gom3/",
				                                {
				                                    layers:"u,v",
				                                    transparent: true,
				                                    styles: "filledcontours_average_jet_0_1.5_cell_False",
				                                    time: "1984-10-17T00:00:00",
				                                    elevation: "1"
				                                },
				                                
				                                {
				                                    singleTile: true, 
				                                    ratio: 1,
				                                    isBaseLayer: false,
				                                    visibility: false
				                                    ,getURL       : function (bounds) {
        
                                                    bounds = this.adjustBounds(bounds);
                                                    //alert(bounds)
                                                    bounds.transform(new OpenLayers.Projection("EPSG:3857"),new OpenLayers.Projection("EPSG:4326"));
                                                    //alert(bounds);
                                                    var imageSize = this.getImageSize();
                                                    var newParams = {};
                                                    // WMS 1.3 introduced axis order
                                                    var reverseAxisOrder = this.reverseAxisOrder();
                                                    newParams.BBOX = this.encodeBBOX ?
                                                        bounds.toBBOX(null, reverseAxisOrder) :
                                                        bounds.toArray(reverseAxisOrder);
                                                    newParams.WIDTH = imageSize.w;
                                                    newParams.HEIGHT = imageSize.h;
                                                    var requestString = this.getFullRequestString(newParams);
                                                    return requestString;
				                                }
				                                }
				                                );
				
				
			fvcompcolor = new OpenLayers.Layer.WMS("FVCOM Velocity Interpolated Psuedocolor",
				                                "http://{{localsite}}/wms/30yr_gom3/",
				                                {
				                                    layers:"u,v",
				                                    transparent: true,
				                                    styles: "pcolor_average_jet_0_1.5_cell_False",
				                                    time: "1984-10-17T00:00:00",
				                                    elevation: "1"
				                                },
				                                
				                                {
				                                    singleTile: true, 
				                                    ratio: 1,
				                                    isBaseLayer: false,
				                                    visibility: false
				                                    ,getURL       : function (bounds) {
        
                                                    bounds = this.adjustBounds(bounds);
                                                    //alert(bounds)
                                                    bounds.transform(new OpenLayers.Projection("EPSG:3857"),new OpenLayers.Projection("EPSG:4326"));
                                                    //alert(bounds);
                                                    var imageSize = this.getImageSize();
                                                    var newParams = {};
                                                    // WMS 1.3 introduced axis order
                                                    var reverseAxisOrder = this.reverseAxisOrder();
                                                    newParams.BBOX = this.encodeBBOX ?
                                                        bounds.toBBOX(null, reverseAxisOrder) :
                                                        bounds.toArray(reverseAxisOrder);
                                                    newParams.WIDTH = imageSize.w;
                                                    newParams.HEIGHT = imageSize.h;
                                                    var requestString = this.getFullRequestString(newParams);
                                                    return requestString;
				                                }
				                                }
				                                );	
				                                
	       fvcomfillednode = new OpenLayers.Layer.WMS("FVCOM Salinity (Filled Contours)",
				                                "http://{{localsite}}/wms/30yr_gom3/",
				                                {
				                                    layers:"salinity",
				                                    transparent: true,
				                                    styles: "filledcontours_average_jet_None_None_node_False",
				                                    time: "1984-10-17T00:00:00",
				                                    elevation: "1"
				                                },
				                                
				                                {
				                                    singleTile: true, 
				                                    ratio: 1,
				                                    isBaseLayer: false,
				                                    visibility: false
				                                    ,getURL       : function (bounds) {
        
                                                    bounds = this.adjustBounds(bounds);
                                                    //alert(bounds)
                                                    bounds.transform(new OpenLayers.Projection("EPSG:3857"),new OpenLayers.Projection("EPSG:4326"));
                                                    //alert(bounds);
                                                    var imageSize = this.getImageSize();
                                                    var newParams = {};
                                                    // WMS 1.3 introduced axis order
                                                    var reverseAxisOrder = this.reverseAxisOrder();
                                                    newParams.BBOX = this.encodeBBOX ?
                                                        bounds.toBBOX(null, reverseAxisOrder) :
                                                        bounds.toArray(reverseAxisOrder);
                                                    newParams.WIDTH = imageSize.w;
                                                    newParams.HEIGHT = imageSize.h;
                                                    var requestString = this.getFullRequestString(newParams);
                                                    return requestString;
				                                }
				                                }
				                                );
				fvcomnode = new OpenLayers.Layer.WMS("FVCOM Temperature (Contours)",
				                                "http://{{localsite}}/wms/30yr_gom3/",
				                                {
				                                    layers:"temp",
				                                    transparent: true,
				                                    styles: "contours_average_jet_None_None_node_False",
				                                    time: "1984-10-17T00:00:00",
				                                    elevation: "1"
				                                },
				                                
				                                {
				                                    singleTile: true, 
				                                    ratio: 1,
				                                    isBaseLayer: false,
				                                    visibility: false
				                                    ,getURL       : function (bounds) {
        
                                                    bounds = this.adjustBounds(bounds);
                                                    //alert(bounds)
                                                    bounds.transform(new OpenLayers.Projection("EPSG:3857"),new OpenLayers.Projection("EPSG:4326"));
                                                    //alert(bounds);
                                                    var imageSize = this.getImageSize();
                                                    var newParams = {};
                                                    // WMS 1.3 introduced axis order
                                                    var reverseAxisOrder = this.reverseAxisOrder();
                                                    newParams.BBOX = this.encodeBBOX ?
                                                        bounds.toBBOX(null, reverseAxisOrder) :
                                                        bounds.toArray(reverseAxisOrder);
                                                    newParams.WIDTH = imageSize.w;
                                                    newParams.HEIGHT = imageSize.h;
                                                    var requestString = this.getFullRequestString(newParams);
                                                    return requestString;
				                                }
				                                }
				                                );
				                                
				fvcombarb = new OpenLayers.Layer.WMS("FVCOM Velocity Barbs",
				                                "http://{{localsite}}/wms/30yr_gom3/",
				                                {
				                                    layers:"u,v",
				                                    transparent: true,
				                                    styles: "barbs_average_jet_.1_.5_cell_False",
				                                    time: "2012-06-19T00:00:00",
				                                    elevation: "5"
				                                },
				                                
				                                {
				                                    singleTile: true, 
				                                    ratio: 1,
				                                    isBaseLayer: false,
				                                    visibility: false
				                                    ,getURL       : function (bounds) {
        
                                                    bounds = this.adjustBounds(bounds);
                                                    //alert(bounds)
                                                    bounds.transform(new OpenLayers.Projection("EPSG:3857"),new OpenLayers.Projection("EPSG:4326"));
                                                    //alert(bounds);
                                                    var imageSize = this.getImageSize();
                                                    var newParams = {};
                                                    // WMS 1.3 introduced axis order
                                                    var reverseAxisOrder = this.reverseAxisOrder();
                                                    newParams.BBOX = this.encodeBBOX ?
                                                        bounds.toBBOX(null, reverseAxisOrder) :
                                                        bounds.toArray(reverseAxisOrder);
                                                    newParams.WIDTH = imageSize.w;
                                                    newParams.HEIGHT = imageSize.h;
                                                    var requestString = this.getFullRequestString(newParams);
                                                    return requestString;
				                                }
				                                }
				                                );
				adcirctest = new OpenLayers.Layer.WMS("ADCIRC TEST",
				                                "http://{{localsite}}/wms/adcirc/",
				                                {
				                                    layers:"u-vel,v-vel",
				                                    transparent: true,
				                                    styles: "vectors_average_jet_None_None_node_False",
				                                    time: "2008-09-08T00:00:00",
				                                    elevation: "5"
				                                },
				                                
				                                {
				                                    singleTile: true, 
				                                    ratio: 1,
				                                    isBaseLayer: false,
				                                    visibility: false
				                                    ,getURL       : function (bounds) {
        
                                                    bounds = this.adjustBounds(bounds);
                                                    //alert(bounds)
                                                    bounds.transform(new OpenLayers.Projection("EPSG:3857"),new OpenLayers.Projection("EPSG:4326"));
                                                    //alert(bounds);
                                                    var imageSize = this.getImageSize();
                                                    var newParams = {};
                                                    // WMS 1.3 introduced axis order
                                                    var reverseAxisOrder = this.reverseAxisOrder();
                                                    newParams.BBOX = this.encodeBBOX ?
                                                        bounds.toBBOX(null, reverseAxisOrder) :
                                                        bounds.toArray(reverseAxisOrder);
                                                    newParams.WIDTH = imageSize.w;
                                                    newParams.HEIGHT = imageSize.h;
                                                    var requestString = this.getFullRequestString(newParams);
                                                    return requestString;
				                                }
				                                }
				                                );  
				info = new OpenLayers.Control.WMSGetFeatureInfo({
                    url: 'http://{{localsite}}/wms/30yr_gom3/', 
                    title: 'Identify features by clicking',
                    queryVisible: true,
                    //TIME = "1984-10-17T00:00:00/1984-10-18T00:00:00",
                    //ELEVATION = "5",
                    
                    eventListeners: {
                        getfeatureinfo: function(event) {
                            map.addPopup(new OpenLayers.Popup.FramedCloud(
                                "chicken", 
                                map.getLonLatFromPixel(event.xy),
                                null,
                                event.text,
                                null,
                                true
                            ));
                        }
                    }
                });                              
				
				map.addLayer(fvcomv);
				map.addLayer(fvcomt);
				map.addLayer(fvcomvec);
				map.addLayer(fvcomcont);
				map.addLayer(fvcomfilled);
				map.addLayer(fvcompcolor);
				map.addLayer(fvcomfillednode);
				map.addLayer(fvcomnode);
				map.addLayer(fvcombarb);
				//map.addLayer(adcirctest);
				map.setCenter(
					new OpenLayers.LonLat(-72, 41).transform(
						new OpenLayers.Projection("EPSG:4326"),
						map.getProjectionObject()
					), 8
				);
				map.addControl(info);
				info.activate();
				map.addControl(new OpenLayers.Control.LayerSwitcher());
			}
	</script>
	
</head>
<body onload="init()">
	<div id="map"></div>
</body>
</html>
